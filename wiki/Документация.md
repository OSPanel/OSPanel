О программе  
------------
Open Server Panel является продвинутым аналогом таких [WAMP](https://ru.wikipedia.org/wiki/WAMP) сборок как Xampp, Denwer, Vertrigo, Wampserver и других схожих с ними программ. Если ранее вы уже работали с подобным программным обеспечением, то вам не составит труда быстро освоить и Open Server Panel. 

Open Server Panel работает без установки (портативно) при условии наличия в системе MSVC++ 2005-2022 Redistributable Packages. Это означает, что вы можете спокойно переносить каталог с программой в любое место на диске, или даже копировать его на другой компьютер. В комплект поставки уже включён инструмент для подготовки системы к работе с Open Server Panel - [System Preparation Tool](https://github.com/OSPanel/SysPrepTool).

Управление программным комплексом может осуществляться через две панели управления: [Веб-интерфейс](https://github.com/OSPanel/OpenServerPanel#веб-интерфейс) и [интерфейс командной строки](https://github.com/OSPanel/OpenServerPanel#интерфейс-командной-строки) (CLI). Обе панели управления взаимодействуют с программой через [API](https://ru.wikipedia.org/wiki/API) по HTTP-протоколу, в то время как сама программа работает незаметно (невидимо) для пользователя.

Все доступные модули (даже одного типа, например: MySQL-5.5 и MySQL-8.0) могут включаться параллельно и никак не мешают работе друг друга. Каждый модуль имеет собственную, изолированную от Windows, среду окружения и не конфликтует с другим подобным ПО в вашей системе. Помимо активных (запускаемых) модулей в составе Open Server Panel имеются пассивные (не подлежащие запуску) модули, которые используются в качестве дополнений для среды окружения: Git, Perl и др.

[Веб-интерфейс](https://github.com/OSPanel/OpenServerPanel#веб-интерфейс) находится в разработке, поэтому сейчас изменение настроек возможно только путём ручной правки файлов конфигурации, а управление программой доступно только через интерфейс командной строки.

Системные требования
------------
| Тип | Описание |
| ---: | :--- |
| **Операционная система** | Windows 7 SP1 x64 / Windows Server 2008 R2 SP1 или новее<br>Версий для Linux и MacOS нет<br>32-битные системы не поддерживаются |
| **Свободные аппаратные ресурсы** | от 1 ГБ RAM и от 10 ГБ места на диске |
| **Обязательное ПО** | MSVC++ 2005-2022 Redistributable Packages (есть в комплекте) |
| **Файловая система** | NTFS (сетевые диски не поддерживаются) |

Начало использования
------------
Рекомендуется использовать систему на базе Windows 10 или более новой версии Windows. Желательно выполнять установку на SSD-накопитель (при его наличии), что значительно повысит скорость работы всех модулей.

Не используйте Open Server Panel на USB-флеш-накопителях (быстрый износ и крайне медленная работа) и на внешних носителях информации со старым интерфейсом USB 2.0 (крайне медленная работа).

На время тестов [Beta](https://ru.wikipedia.org/wiki/Бета-тестирование)-версии дистрибутив распространяется в виде самораспаковывающегося RAR-архива. Скачайте дистрибутив, распакуйте его в выбранный каталог (желательно в корень диска). Перед началом работы снимите защиту (есть есть) с файла [HOSTS](https://ru.wikipedia.org/wiki/Hosts) в настройках вашего файрвола/антивируса, а также выполните настройку необходимых исключений для исполняемых файлов.

Запустите файл `OSPanel.exe`, это фоновый управляющий процесс, с которым вы никак не будете взаимодействовать (невидимый). Сразу после запуска управляющего процесса вы можете использовать интерфейс командной строки, для этого запустите файл `Cli.bat`.

После запуска панели управления изучите справку по команде `sysprep` и выполните подготовку системы с помощью инструмента System Preparation Tool, после чего перезагрузите компьютер (обязательно!). Без подготовки системы с помощью System Preparation Tool корректная работа Open Server Panel на вашем компьютере не гарантируется! После перезагрузки компьютера программа готова к использованию, вы можете активировать необходимые модули.

В период тестирования после закрытия программы вы будете наблюдать мини-окно с результатом проверки на утечку памяти. В случае сбоя в своей работе программа автоматически отправит отчёт об ошибке на сервер проекта.

| :information_source: **Внимание:** Не запускайте программу с правами администратора! |
| :--- |
| Это потенциально небезопасно и не является необходимым условием для работы Open Server Panel. Права администратора будут запрошены только при запуске System Preparation Tool (команда `sysprep`). |

Структура каталогов
------------
    .
    ├── bin                       # Общие исполняемые файлы
    ├── config                    # Настройки
    │   ├── module...             # Настройки модуля
    │   │   ├── default           # Настройки модуля для профиля Default
    │   │   │   ├── templates     # Шаблоны конфигурации
    │   │   │   └── settings.ini  # Настройки модуля для профиля Default
    │   │   └── module.ini        # Базовые настройки модуля (вкл/выкл + имя профиля)
    │   └── program.ini           # Настройки программы
    ├── data                      # Хранилище данных (базы данных и др.)
    ├── home                      # Пользовательские проекты (домены)
    ├── logs                      # Файлы журналов
    ├── modules                   # Модули
    │   └── module...             # Основной каталог модуля
    │       └── ospanel_data      # Служебные файлы (исходники настроек и конфигов)
    ├── system                    # Служебный каталог программы
    │   └── lang                  # Языковые файлы
    ├── temp                      # Временные файлы
    └── user                      # Пользовательские данные

Управление (CLI)
------------
На данный момент управление программой доступно только в консольном режиме. [Веб-интерфейс](https://github.com/OSPanel/OpenServerPanel#веб-интерфейс) находится в разработке и станет доступен в ближайшем будущем.
```
Использование: osp <команда> [<аргументы>]

Управление средой окружения:

add     <MODULE>            Объединить среду окружения модуля с текущей средой окружения консоли
                            Внимание! Создание общей среды окружения для нескольких модулей из
                            одной группы может привести к непредсказуемым ошибкам в их работе!
                            Внимание! Объединение среды окружения модуля(ей) со средой окружения
                            Windows может привести к конфликтам с аналогичными модулями в системе!
info                        Показать информацию о текущей среде окружения
reset                       Сбросить текущую среду окружения (оригинальная среда Windows)
set     <MODULE>            Применить среду окружения модуля

Управление модулями:

init    <MODULE> [PROFILE]  Переинициализировать модуль (при необходимости укажите новый профиль)
                            Команда доступна только для пассивных (не подлежащих запуску) модулей!
list                        Показать информацию о модулях
off     <MODULE>            Выключить модуль
on      <MODULE> [PROFILE]  Включить модуль (при необходимости укажите новый активный профиль)
restart <MODULE> [PROFILE]  Перезапустить модуль (при необходимости укажите новый активный профиль)
shell   <MODULE>            Запустить shell/cli оболочку модуля (если доступно)
status  <MODULE>            Показать информацию о статусе модуля

Другие команды:

exit                        Завершить работу программы
log     <MODULE|main>  [N]  Показать журнал модуля/программы (последние N строк, по умолчанию: 10)
sysprep [silent|ssd]        Запустить инструмент подготовки операционной системы
                            Добавьте флаг "silent" для запуска подготовки системы в тихом режиме
                            Флаг "ssd" аналогичен "silent" (но с оптимизацией настроек под SSD)
                            Подготовка в тихом режиме происходит автоматически и без отслеживания
                            прогресса, после окончания процедуры будет выполнена перезагрузка!
                            Для запуска процесса тихой подготовки без запроса подтверждения со
                            стороны Windows консоль должна быть запущена с правами Администратора
version                     Показать информацию о версии программы

Примеры использования:

osp set PostgreSQL-9.6      Применение в консоли среды окружения модуля PostgreSQL-9.6
osp on bind myprofile       Включение модуля Bind со сменой профиля настроек на MyProfile
osp restart mysql-8.0       Перезапуск модуля MySQL-8.0 (имя модуля принимается в любом регистре)
osp log main 20             Вывод в консоль 20-ти последних строк из журнала программы
osp reset & osp add git     Объединение среды окружения Windows со средой окружения Git
```

Настройка программы
------------
Настройки программы и модулей (глобальные опции) задаются в файле `.\config\program.ini`.

:information_source: **Внимание:** Для применения изменений необходимо перезапустить программу.

### Секция `[main]` ###
Секция содержит основные настройки программы.
| Параметр | Описание |
| :---: | :--- |
| `allowed_env_vars` | Список переменных среды окружения Windows (через пробел) передаваемых всем запускаемым процессам. Белый список переменных необходим для фильтрации рабочей среды окружения модулей от среды установленного в систему аналогичного ПО.<br><br>Вносите изменения в этот список только в том случае, если вы точно знаете что делаете, т.к. это может нарушить нормальную работу модулей. |
| `clear_dns_cache` | Очищать системный кеш DNS при изменении файла [HOSTS](https://ru.wikipedia.org/wiki/Hosts) (`on`/`off`). Отключайте эту опцию только в том случае, если вы вручную внесли изменения в файл HOST, очистили кеш DNS и больше не планируете вносить изменения в настройки программы и модулей. Также эту опцию можно отключить если вы используете единственный домен - localhost. |
| `domain` | Локальный домен API и веб-интерфейса. Если включено использование файла [HOSTS](https://ru.wikipedia.org/wiki/Hosts), то веб-интерфейс будет доступен в браузере на указанном домене.<br>Если в браузере используется VPN/прокси, то в настройках VPN/прокси необходимо задать исключение для этого домена. |
| `hosts_file` | Использовать файл [HOSTS](https://ru.wikipedia.org/wiki/Hosts) (`on`/`off`). Если выключено, то следующие возможности станут недоступны: использование имён модулей в качестве доменов (подключение будет возможным только по IP), использование локальных доменов (только localhost), включая использование локального домена для доступа к панели управления (см. `web_panel_domain`). |
| `hosts_file_encoding` | Кодировка файла [HOSTS](https://ru.wikipedia.org/wiki/Hosts). Допустимые значения кодировки: `UTF8`, `ANSI`, `ASCII`. |
| `ip` | IP-адрес API и веб-интерфейса. Если в браузере используется VPN/прокси, то в настройках VPN/прокси необходимо задать исключение для этого IP. |
| `lang` | Язык программы. В качестве значения используйте имя любого языкового файла из каталога `.\system\lang`. |
| `port` | Порт API и веб-интерфейса. Запуск программы будет невозможен если такой порт уже используется. |
| `virtual_drive` | Использовать виртуальный диск (`on`/`off`). Виртуальный диск позволяет избежать проблем с некорректной работой модулей при наличии в пути у рабочего каталога пробелов или символов национального (не английского) алфавита.<br><br>Разрешённые символы в пути до корневого каталога с программой, которые допускают возможность работы без виртуального диска: `A-Za-z0-9.+-\:_`<br><br>При наличии в пути пробелов и других недопустимых символов использование программы без виртуального диска будет невозможным.<br><br>:warning: **Важно**: Не используйте виртуальный диск без крайней необходимости, постарайтесь выбрать совместимый рабочий каталог отвечающий требованиям. |
| `virtual_drive_letter` | Буква виртуального диска. Выбранная буква должна быть свободной, т.е. диск с такой буквой не должен присутствовать в системе.<br>Допустимые значения для буквы диска (только латиница): `A-Z`. |

### Секция `[modules]` ###
Секция содержит глобальные настройки модулей. Они используются в том случае, если в настройках модуля указано значение auto (по умолчанию). Эти значения можно переопределить в файле настроек у любого модуля с возможностью включения/выключения, а значения опций `terminal_codepage` и `time_zone` можно переопределить в настройках любых модулей. См. файл `.\config\<имя_модуля>\<имя_профиля>\settings.ini`.
| Параметр | Описание |
| :---: | :--- |
| `control_timeout` | Пауза между выполнением команд (включение, выключение и перезапуск модуля). Обязательная пауза крайне необходима для того, чтобы любой модуль мог корректно выполнить инициализацию/закрытие своих файлов/логов/баз данных и т.д..<br><br>Если новая команда подана сразу после предыдущей, например через 2 секунды при значении опции `5s`, то она будет задержана на оставшиеся 3 сек., в противном случае команда будет выполнена мгновенно. Недопустимо устанавливать значение равным менее 5 сек. (меньшее значение не будет использовано программой).<br><br>Допустимо использование следующих обозначений: `s` - секунды (не обязательно). |
| `log_max_filesize` | Максимальный размер журнала (`0` - отключает ограничение). Если размер какого-либо журнала превысит указанный, то при очередном запуске модуля его файл журнала будет пересоздан.<br><br>Допустимо использование следующих обозначений: `B` - байты, `K` - килобайты, `M` - мегабайты, `G` - гигабайты, `T` - терабайты. Для принудительной очистки логов при каждом запуске установите значение равным `1` (к цифрам без обозначений применяются `B` - байты). |
| `log_write_title` | Добавлять заголовок в лог модуля при каждом запуске (`on`/`off`). Полезно для визуального разграничения рабочих сессий если не используется автоматическая очистка журнала модуля. |
| `max_probation_fails` | Максимальное кол-во последовательных (подряд) провалов испытательного срока, после которых модуль перейдёт в состояние "Ошибка" (см. probation). |
| `max_shutdown_time` | Максимальное время выключения модуля (`0` - отключает ограничение). Если рабочий процесс модуля не успел завершить свою работу за указанное время, то по завершению ожидания он будет принудительно остановлен (терминирован). Недопустимо устанавливать значение равным менее 30 сек. (меньшее значение, кроме ноля, не будет использовано программой).<br><br>Не следует устанавливать этот лимит если вы точно не знаете что делаете, т.к. преждевременная принудительная остановка рабочего процесса модуля может привести к различным проблемам (порча БД, неполная запись логов и др.).<br><br>Допустимо использование следующих обозначений: `s` - секунды, `m` - минуты, `h` - часы, `d` - дни (к цифрам без обозначений применяются `s` - секунды). |
| `probation` | Время проверки работоспособности модуля (испытательный срок). Отсчёт начинается с момента успешного запуска рабочего процесса модуля.<br><br>Если в течение испытательного срока рабочий процесс модуля неожиданно завершил свою работу, то он не будет автоматически перезапущен и модуль перейдёт в состояние "Ошибка", ожидая дополнительных действий от пользователя (например исправления файлов конфигурации). Состояние "Ошибка" также будет установлено в том случае, если запускаемый процесс не смог стартовать на системном уровне.<br><br>Значение `0` полностью отключает испытательный срок, в случае неожиданного завершения работы процесс будет всегда автоматически перезапускаться, при циклическом сбое - бесконечно. Не рекомендуется устанавливать значение `0` или задавать слишком короткий период проверки (менее 30 сек.).<br><br>Допустимо использование следующих обозначений: `s` - секунды, `m` - минуты, `h` - часы, `d` - дни (к цифрам без обозначений применяются `s` - секунды). |
| `silent_mode` | Тихий режим работы (`on`/`off`). В этом режиме не отображаются всплывающие (pop-up) сообщения об ошибках, которые генерирует служба Windows Error Reporting или сам модуль. Отключайте этот режим только тогда, когда вам требуется разобраться с проблемами в работе модуля, в остальное время он должен быть постоянно включён. |
| `terminal_codepage` | Кодировка консоли при работе со средой окружения модуля. Можно использовать значение `system`, в этом случае будет использоваться системная кодировка.<br><br>Если задать пустое значение или не задавать его вовсе, то кодировка в консоли при активации среды окружения модуля или его SHELL оболочки (если он использует глобальное значение `auto` для `terminal_codepage`) изменяться не будет (используется текущая активная кодировка). |
| `time_zone` | Часовой пояс (временная зона). В качестве значения этого параметра необходимо указать часовой пояс в формате Etc/GMT (например: `Etc/GMT-3`). Можно использовать значение `system`, в этом случае будет использоваться системный часовой пояс.<br><br>Внимание! Формат Etc/GMT отличается от UTC обратным порядком, например: `Etc/GMT-3` = `UTC/GMT+3` = `UTC+03:00` = `Europe/Moscow`. |

### Секция `[environment]` ###
Секция служит для управления переменными общей среды окружения. Заданные здесь переменные применяются ко всем модулям, к запускаемым процессам и к окружению самой программы, но не влияют на переменные среды окружения Windows.<br><br>Для любого модуля эти переменные можно переопределить/дополнить/удалить в файле его настроек `.\config\<имя_модуля>\<имя_профиля>\settings.ini`.<br><br>Для удаления переменной из среды окружения задайте пустое значение или используйте глобальный фильтр (см. `allowed_env_vars`).<br><br>Добавьте в конец `PATH` следующую запись если планируете использовать PowerShell: `;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\`

Доступны следующие шаблонные переменные:

| Переменная | Описание |
| :---: | :--- |
| `{root_dir}` | Корневой каталог программы (полный путь) |
| `{root_drive}` | Диск корневого каталога |
| `{root_path}` | Путь к корневому каталогу программы |
| `{terminal_codepage}` | Кодировка консоли (см. `terminal_codepage`) |
| `{time_zone}` | Часовой пояс в формате Etc/GMT (см. `time_zone`) |

Помимо шаблонных переменных вы можете использовать любые переменные среды окружения Windows, например: `%SYSTEMDRIVE%`, `%USERNAME%`, `%PATH%` и т.д.

Значения секции заданные "по умолчанию":
```
[environment]

PATH                  = {root_dir}\bin;%SYSTEMROOT%\system32;%SYSTEMROOT%;%SYSTEMROOT%\System32\Wbem
HOMEDRIVE             = {root_drive}
HOMEPATH              = {root_path}\user
OSP_HOME              = {root_dir}\user
TEMP                  = {root_dir}\temp
TMP                   = {root_dir}\temp
```

Настройка модулей
------------
Настройки любого из модулей в Open Server Panel задаются в файле `.\config\<имя_модуля>\<имя_профиля>\settings.ini`. По умолчанию используется профиль `Default`. Имя рабочего профиля задаётся через панель управления программой.<br><br>Резервная копия оригинальных настроек и оригинальных файлов конфигурации модуля хранится в каталоге `.\modules\<имя_модуля>\ospanel_data\original` и в будущем будет использоваться в панели управления для функции восстановления оригинальной конфигурации.
<br><br>Вы можете самостоятельно создавать дополнительные профили настроек модулей. Для создания нового профиля, например `MyProfile`, достаточно создать копию каталога любого другого существующего профиля у выбранного модуля, например скопировав каталог оригинального профиля `.\config\<имя_модуля>\Default` в `.\config\<имя_модуля>\MyProfile`. Допустимые символы в имени профиля: `A-Za-z0-9-+_.()`. Использование собственных профилей может быть полезно в ряде случаев, например, когда вам необходимо протестировать новую конфигурацию модуля или вы просто хотите поэкспериментировать.
<br><br>
:information_source: **Внимание:** Для применения изменений модуль необходимо перезапустить/переинициализировать.
<br><br>:warning: **Важно**: Не редактируйте файл базовых настроек модуля `.\config\<имя_модуля>\module.ini`! Процесс работы с ним полностью автоматизирован и не требует вмешательства пользователя.

### Секция `[main]` ###
Секция содержит основные настройки модуля, все параметры этой секции являются необязательными.

| Параметр | Описание |
| :---: | :--- |
| `ip` | IP-адрес модуля. Можно задавать несколько IP (через пробел) и IP в формате IPv6 в случаях когда модуль это поддерживает. Если вы указываете несколько IP-адресов, то при обновлении файла [HOSTS](https://ru.wikipedia.org/wiki/Hosts) в качестве IP для имени модуля будет использован первый указанный IP. Настройка IP игнорируется для модулей DNS. |
| `port` | Порт модуля. Настройка порта игнорируется для модулей классов Web Server и DNS. |
| `directories` | Каталоги необходимые для работы модуля (через пробел). Если каталог не существует он будет создан в процессе запуска модуля. Можно использовать шаблонные переменные. |
| `query_log_values` | Доступные уровни журналирования запросов (принимает разные значения и поддерживается не всеми модулями) |
| `query_log_level` | Уровень журналирования запросов |
| `log_level_values` | Доступные уровни журналирования (принимает разные значения и поддерживается не всеми модулями) |
| `log_level` | Уровень журналирования |
| `shell_command` | Команда запуска SHELL оболочки или CLI интерфейса модуля. Можно использовать шаблонные переменные. |
| `start_command` | Команда запуска модуля. Можно использовать шаблонные переменные. |
| `start_dir` | Каталог, из которого запускается модуль (каталог должен существовать). Можно использовать шаблонные переменные. |
| `control_timeout` | Пауза между выполнением команд (включение, выключение и перезапуск модуля). Обязательная пауза крайне необходима для того, чтобы любой модуль мог корректно выполнить инициализацию/закрытие своих баз данных, логов и др.<br><br>Если новая команда подана сразу после предыдущей, например через 2 секунды при значении опции `5s`, то она будет задержана на оставшиеся 3 сек., в противом случае команда будет выполнена мгновенно. Недопустимо устанавливать значение равным менее 5 сек. (меньшее значение не будет использовано программой).<br><br>Можно использовать значение `auto`, в этом случае будет использовано глобальное значение из основных настроек программы.<br><br>Допустимо использование следующих обозначений: `s` - секунды (не обязательно). |
| `log_max_filesize` | Максимальный размер журнала (`0` - отключает ограничение). Если размер какого-либо журнала превысит указанный, то при очередном запуске модуля его файл журнала будет пересоздан.<br><br>Можно использовать значение `auto`, в этом случае будет использовано глобальное значение из основных настроек программы.<br><br>Допустимо использование следующих обозначений: `B` - байты, `K` - килобайты, `M` - мегабайты, `G` - гигабайты, `T` - терабайты. Для принудительной очистки логов при каждом запуске установите значение равным `1` (к цифрам без обозначений применяются `B` - байты). |
| `log_write_title` | Добавлять заголовок в лог модуля при каждом запуске (`on`/`off`). Полезно для визуального разграничения рабочих сессий если не используется автоматическая очистка журнала модуля.<br><br>Можно использовать значение `auto`, в этом случае будет использовано глобальное значение из основных настроек программы. |
| `max_probation_fails` | Максимальное кол-во последовательных (подряд) провалов испытательного срока, после которых модуль перейдёт в состояние "Ошибка" (см. probation).<br><br>Можно использовать значение `auto`, в этом случае будет использовано глобальное значение из основных настроек программы. |
| `max_shutdown_time` | Максимальное время выключения модуля (`0` - отключает ограничение). Если рабочий процесс модуля не успел завершить свою работу за указанное время, то по завершению ожидания он будет принудительно остановлен (терминирован). Недопустимо устанавливать значение равным менее 30 сек. (меньшее значение, кроме ноля, не будет использовано программой).<br><br>Не следует устанавливать этот лимит если вы точно не знаете что делаете, т.к. преждевременная принудительная остановка рабочего процесса модуля может привести к различным проблемам (порча БД, неполная запись логов и др.).<br><br>Можно использовать значение `auto`, в этом случае будет использовано глобальное значение из основных настроек программы.<br><br>Допустимо использование следующих обозначений: `s` - секунды, `m` - минуты, `h` - часы, `d` - дни (к цифрам без обозначений применяются `s` - секунды). |
| `probation` | Время проверки работоспособности модуля (испытательный срок). Отсчёт начинается с момента успешного запуска рабочего процесса модуля.<br><br>Если в течение испытательного срока рабочий процесс модуля неожиданно завершил свою работу, то он не будет автоматически перезапущен и модуль перейдёт в состояние "Ошибка", ожидая дополнительных действий от пользователя (например исправления файлов конфигурации). Состояние "Ошибка" также будет установлено в том случае, если запускаемый процесс не смог стартовать на системном уровне.<br><br>Значение `0` полностью отключает испытательный срок, в случае неожиданного завершения работы процесс будет всегда автоматически перезапускаться, при циклическом сбое - бесконечно. Не рекомендуется устанавливать значение `0` или задавать слишком короткий период проверки (менее 30 сек.).<br><br>Можно использовать значение `auto`, в этом случае будет использовано глобальное значение из основных настроек программы.<br><br>Допустимо использование следующих обозначений: `s` - секунды, `m` - минуты, `h` - часы, `d` - дни (к цифрам без обозначений применяются `s` - секунды). |
| `silent_mode` | Тихий режим работы (`on`/`off`). В этом режиме не отображаются всплывающие (pop-up) сообщения об ошибках, которые генерирует служба Windows Error Reporting или сам модуль. Отключайте этот режим только тогда, когда вам требуется разобраться с проблемами в работе модуля, в остальное время он должен быть постоянно включён.<br><br>Можно использовать значение `auto`, в этом случае будет использовано глобальное значение из основных настроек программы. |
| `terminal_codepage` | Кодировка консоли при работе со средой окружения модуля. Можно использовать специальные значения `system` (системная кодировка) или `auto` (глобальное значение из основных настроек программы).<br><br>Если задать пустое значение или не задавать его вовсе, то кодировка в консоли при активации среды окружения модуля или его SHELL оболочки изменяться не будет (используется текущая активная кодировка). |
| `time_zone` | Часовой пояс (временная зона). В качестве значения этого параметра необходимо указать часовой пояс в формате Etc/GMT (например: `Etc/GMT-3`). Можно использовать специальные значения `system` (системный часовой пояс) или `auto` (глобальное значение из основных настроек программы).<br><br>Внимание! Формат Etc/GMT отличается от UTC обратным порядком, например: `Etc/GMT-3` = `UTC/GMT+3` = `UTC+03:00` = `Europe/Moscow`. |

Доступны следующие шаблонные переменные:

| Переменная | Описание |
| :---: | :--- |
| `{module_name}` | Имя модуля |
| `{root_dir}` | Корневой каталог программы (полный путь) |
| `{root_drive}` | Диск корневого каталога |
| `{root_path}` | Путь к корневому каталогу программы |

Для параметров `cmd` и `shell` секции `[main]` доступны также следующие шаблонные переменные (если одноимённые параметры заданы в этой же секции):

| Переменная | Описание |
| :---: | :--- |
| `{ip}` | IP-адрес(а) модуля |
| `{port}` | Порт модуля |
| `{log_level}` | Уровень журналирования |
| `{query_log_level}` | Уровень журналирования запросов |
| `{terminal_codepage}` | Кодировка консоли |
| `{time_zone}` | Часовой пояс в формате Etc/GMT |

Помимо шаблонных переменных вы можете использовать любые переменные среды окружения Windows, например: `%SYSTEMDRIVE%`, `%USERNAME%`, `%PATH%` и т.д.

### Секция `[environment]` ###
Секция служит для задания/переопределения переменных среды окружения модуля (поддерживаемые переменные зависят от модуля). Для удаления переменной из среды окружения задайте пустое значение.

Доступны следующие шаблонные переменные:

| Переменная | Описание |
| :---: | :--- |
| `{module_name}` | Имя модуля |
| `{root_dir}` | Корневой каталог программы (полный путь) |
| `{root_drive}` | Диск корневого каталога |
| `{root_path}` | Путь к корневому каталогу программы |

Доступны также следующие шаблонные переменные, если одноимённые параметры заданы в секции `[main]`:

| Переменная | Описание |
| :---: | :--- |
| `{ip}` | IP-адрес(а) модуля |
| `{port}` | Порт модуля |
| `{log_level}` | Уровень журналирования |
| `{query_log_level}` | Уровень журналирования запросов |
| `{terminal_codepage}` | Кодировка консоли |
| `{time_zone}` | Часовой пояс в формате Etc/GMT |

Помимо шаблонных переменных вы можете использовать любые переменные среды окружения Windows, например: `%SYSTEMDRIVE%`, `%USERNAME%`, `%PATH%` и т.д.

### Секция `[имя_файла]` ###
Секции этого типа описывают работу с шаблонами файлов конфигурации и с шаблонами других служебных файлов модуля (кол-во секций не ограничено). Шаблоны находятся в каталоге `.\config\<имя_модуля>\<имя_профиля>\templates`. В процессе инициализации модуля шаблоны, описанные в таких секциях, преобразуются во временные рабочие файлы, которые необходимы для работы модуля.

| Параметр | Обязательный | Описание |
| :---: | :---: | :--- |
| `comment` | да | Символ комментария для использования в файле конфигурации. |
| `destination` | да | Файл назначения. Это временный файл, он пересоздаётся при каждой инициализации модуля и не подлежит редактированию. |
| `enabled` | нет | Включение/выключение использования этого файла конфигурации. Задайте значение `off` если этот файл временно не требуется для работы модуля (по молчанию `on`). |
| `encoding` | нет | Кодировка файла конфигурации (по умолчанию `UTF8`).<br>Допустимые значения `UTF8`, `ANSI`, `ASCII`. |
| `path_separator` | да | Символ разделителя, используемый в именах путей к нужным ресурсам. |

Доступны следующие шаблонные переменные:

| Переменная | Описание |
| :---: | :--- |
| `{module_name}` | Имя модуля |
| `{root_dir}` | Корневой каталог программы (полный путь) |
| `{root_drive}` | Диск корневого каталога |
| `{root_path}` | Путь к корневому каталогу программы |

Помимо шаблонных переменных вы можете использовать любые переменные среды окружения Windows, например: `%SYSTEMDRIVE%`, `%USERNAME%`, `%PATH%` и т.д.

В исходном коде файлов-шаблонов, описанных в подобных секциях, вы можете использовать следующие шаблонные переменные:

| Переменная | Описание |
| :---: | :--- |
| `{module_name}` | Имя модуля |
| `{root_dir}` | Корневой каталог программы (полный путь) |
| `{root_drive}` | Диск корневого каталога |
| `{root_path}` | Путь к корневому каталогу программы |
| **Особые переменные:** | (доступны только если заданы в секции `[main]` файла настроек модуля) |
| `{ip}` | IP-адрес(а) модуля |
| `{port}` | Порт модуля |
| `{log_level}` | Уровень журналирования |
| `{query_log_level}` | Уровень журналирования запросов |
| `{shell_command}` | Команда для запуска shell/cli оболочки модуля |
| `{terminal_codepage}` | Кодировка консоли |
| `{time_zone}` | Часовой пояс в формате Etc/GMT |
| **Служебные переменные:** | (только для специалистов по написанию модулей) |
| `{api_url}` | URL-адрес для доступа к API |
| `{default_environment}` | Среда окружения программы (начальная, формируемая по умолчанию) |
| `{environment}` | Блок описания среды окружения модуля (Batch script формат) |
| `{lang_N}` | Текстовая строка под номером (N) из языкового файла (используемого в данный момент языка) |
| `{active_modules_list}` | Список доступных активных модулей (через двоеточие) |
| `{passive_modules_list}` | Список доступных пассивных модулей (через двоеточие) |
| `{osp_version}` | Версия программы |
| `{windows_environment}` | Среда окружения Windows (оригинальная, сформированная на момент запуска программы) |